import{s as f,g as E,a as N,j as l,Y as S}from"./Stacks-0gbGCfo_.js";import{T as w,o as C,w as L}from"./index-LvVOA0P4.js";import{r}from"./index-4g5l5LRQ.js";import{I as _}from"./Image-i53vtBSC.js";const g=(a,{tokens:s})=>{const t=s.size[a]??a,e=s.size[a]??a;return{width:t,height:e,minWidth:t,maxWidth:t,maxHeight:e,minHeight:e}},j=f(w,{name:"Square",alignItems:"center",justifyContent:"center",variants:{size:{"...size":g,":number":g}}}),u="Avatar",[k,V]=C(u),[y,h]=k(u),x="AvatarImage",I=r.forwardRef((a,s)=>{var A;const{__scopeAvatar:t,src:e,onLoadingStatusChange:n=()=>{},...i}=a,o=h(x,t),[c,d]=r.useState("idle"),m=E((A=g(o.size,{tokens:N()}))==null?void 0:A.width);return r.useEffect(()=>{d("idle")},[JSON.stringify(e)]),r.useEffect(()=>{n(c),o.onImageLoadingStatusChange(c)},[c]),l.jsx(S,{fullscreen:!0,zIndex:1,children:l.jsx(_,{fullscreen:!0,...typeof m=="number"&&!Number.isNaN(m)&&{width:m,height:m},...i,ref:s,src:e,onError:()=>{d("error")},onLoad:()=>{d("loaded")}})})});I.displayName=x;const p="AvatarFallback",v=f(S,{name:p,position:"absolute",fullscreen:!0,zIndex:0}),b=v.extractable(r.forwardRef((a,s)=>{const{__scopeAvatar:t,delayMs:e,...n}=a,i=h(p,t),[o,c]=r.useState(e===void 0);return r.useEffect(()=>{if(e!==void 0){const d=setTimeout(()=>c(!0),e);return()=>clearTimeout(d)}},[e]),o&&i.imageLoadingStatus!=="loaded"?l.jsx(v,{...n,ref:s}):null}));b.displayName=p;const z=f(j,{name:u,position:"relative",overflow:"hidden"}),F=L(r.forwardRef((a,s)=>{const{__scopeAvatar:t,size:e="$true",...n}=a,[i,o]=r.useState("idle");return l.jsx(y,{size:e,scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:l.jsx(z,{size:e,...n,ref:s})})}),{Image:I,Fallback:b});F.displayName=u;export{F as A,j as S};

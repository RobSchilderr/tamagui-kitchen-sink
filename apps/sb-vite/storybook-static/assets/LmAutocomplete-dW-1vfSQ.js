import"./index-U7_1MBcJ.js";import{T as M,G as Y,B as b,H as Q}from"./index-LvVOA0P4.js";import{s as B,j as e,Y as q,S as U,X as I}from"./Stacks-0gbGCfo_.js";import{r as c}from"./index-4g5l5LRQ.js";import"./GorhomPortal-iqDikvYy.js";import{L as Z,T as N,I as v,P,S as z,Y as D,a as ee,X as E,b as te}from"./usePopoverState-tTqBLx82.js";import{E as se,g as ne,h as X,i as re,j as ae,C as oe}from"./LmGrid-eqtElkhI.js";import{P as ie}from"./Headings-cv8zjVaZ.js";import{P as ce}from"./EventEmitter-8bYFdwfg.js";import{L as le,a as ue}from"./ListItem-ZhdiTpgl.js";const de=B(M,{variants:{fullWidth:{true:{width:"100%"}},labelInline:{true:{flexDirection:"row",space:"$3",alignItems:"center"}}}});function _({label:i,children:u,helperText:h,id:l,size:x,labelProps:n,required:C,error:j,helperTextProps:g,...m}){return e.jsxs(de,{...m,space:m.labelInline?"$3":m.space,children:[i&&e.jsxs(Z,{htmlFor:l,size:x||"$3",...n,color:j?"$red10":n==null?void 0:n.color,width:m.labelInline?150:n==null?void 0:n.width,justifyContent:m.labelInline?"flex-end":n==null?void 0:n.justifyContent,children:[i," ",C&&" *"]}),e.jsxs(q,{children:[u,h&&e.jsx(ie,{paddingLeft:"$2",marginTop:"$2",size:x,...g,color:j?"$red10":void 0,children:h})]})]})}const he=c.forwardRef(function({required:i,error:u,helperText:h,helperTextProps:l,label:x,labelProps:n,labelInline:C,multiline:j,containerProps:g,isPassword:m,passwordIconProps:S,fullWidth:r,...s},d){const p=c.useId(),[L,w]=c.useState(!1),R=s.id||p,f={...s};u&&(f.theme="red",f.borderColor=u?"$red8":void 0),r&&(f.minWidth="100%");let $=!!(s.secureTextEntry||m);return e.jsx(_,{id:R,error:u,required:i,labelProps:n,label:x,fullWidth:r,size:s.size,labelInline:C,helperText:h,helperTextProps:l,...g,children:j?e.jsx(N,{...f,placeholderTextColor:s.placeholderTextColor,ref:d}):$?e.jsxs(U,{position:"relative",width:r?"100%":f==null?void 0:f.width,children:[e.jsx(v,{...f,ref:d,secureTextEntry:!L,autoCapitalize:"none",placeholderTextColor:s.placeholderTextColor}),e.jsx(P,{style:{position:"absolute",top:"50%",transform:[{translateY:-.5*20}],height:20,...(s==null?void 0:s.direction)==="rtl"?{left:15}:{right:15}},onPress:()=>{w(A=>!A)},children:L?e.jsx(se,{...S}):e.jsx(ne,{...S})})]}):e.jsx(v,{...f,autoCapitalize:"none",ref:d})})});he.__docgenInfo={description:"",methods:[],displayName:"LmInput"};B(z.Track,{variants:{colorCustom:{":string":i=>({backgroundColor:i})}}});B(z.TrackActive,{variants:{colorCustom:{":string":i=>({backgroundColor:i})}}});function ve({options:i,labelInline:u,labelProps:h,helperText:l,helperTextProps:x,required:n,label:C,value:j,onChange:g,error:m,theme:S,allowNewHook:r,multiple:s=!1,popoverProps:d,containerProps:p,size:L,...w}){const R=c.useId(),[f,$]=c.useState(i),{width:A}=Q(),y=ee(),[H,O]=c.useState(0),W=c.useRef(null),F=c.useRef(null),[o,V]=c.useState(j??(s?[]:null)),k=t=>Array.isArray(o)?!!(o!=null&&o.some(a=>a.value===t.value)):(o==null?void 0:o.value)===t.value,J=t=>{let a=null;s?a=k(t)?(o==null?void 0:o.filter(T=>T.value!==t.value))??[]:[...o??[],t]:a=k(t)?null:t,V(a),typeof g=="function"&&g(a)};c.useEffect(()=>{var a;const t=(a=W.current)==null?void 0:a.offsetWidth;t&&O(t)},[A]),c.useEffect(()=>{var t,a;y.open&&((a=(t=F.current)==null?void 0:t.focus)==null||a.call(t))},[y.open]);const K=Array.isArray(o)?o.map(t=>t==null?void 0:t.label).join(", "):(o==null?void 0:o.label)||"";return e.jsx(_,{id:R,error:m,required:n,labelProps:h,label:C,labelInline:u,helperText:l,helperTextProps:x,size:L,...p,children:e.jsxs(E,{ref:W,children:[e.jsx(E.Item,{children:e.jsx(v,{flex:1,value:K,size:L,theme:S,textOverflow:"ellipsis",onFocus:t=>{var a,T;y.onOpenChange(!y.open),(T=(a=t.target).blur)==null||T.call(a)}})}),e.jsx(E.Item,{children:e.jsx(te,{isBouncy:!0,...d,...y,offset:{mainAxis:15,crossAxis:-30},contentProps:{minWidth:H||void 0,maxWidth:"100%",...d==null?void 0:d.contentProps},trigger:e.jsx(b,{size:L,icon:e.jsx(oe,{}),borderTopLeftRadius:0,borderBottomLeftRadius:0}),children:e.jsx(xe,{ref:F,theme:S,options:f,isSelected:k,onChangeSelection:J,onAddNew:t=>{if(t){const a=typeof r=="function"?r(t):{value:t,label:t};$(T=>[a,...T])}},...w})})})]})})}const xe=c.forwardRef(function({disableSearch:i,theme:u,placeholderSearch:h,options:l,allowNew:x,onAddNew:n,onChangeSelection:C,isSelected:j},g){const[m,S]=c.useState(),r=c.useDeferredValue(m),s=r!=null&&r.length?l.filter(p=>p.label.toLowerCase().includes(r)):l,d=!i||x;return e.jsx(e.Fragment,{children:ce.OS==="web"?e.jsxs(e.Fragment,{children:[d&&e.jsx(I,{padding:"$4",width:"100%",children:e.jsx(v,{theme:u,placeholder:h,width:"100%",ref:g,onChangeText:p=>{S(p.toLowerCase())}})}),e.jsxs(Y,{keyboardShouldPersistTaps:"always",maxHeight:300,width:"100%",marginTop:d?void 0:"$4",marginBottom:"$4",children:[e.jsx(G,{options:s,onChangeSelection:C,isSelected:j}),x&&!(s!=null&&s.length)&&r&&e.jsx(I,{justifyContent:"flex-start",marginBottom:"$3",marginLeft:"$3",children:e.jsx(b,{onPress:()=>n(r),chromeless:!0,icon:e.jsx(X,{}),children:r})})]})]}):e.jsxs(q,{children:[d&&e.jsx(I,{padding:"$4",width:"100%",children:e.jsx(v,{theme:u,ref:g,placeholder:h,width:"100%",onChangeText:p=>{S(p.toLowerCase())}})}),e.jsx(Y,{children:e.jsx(G,{options:s,onChangeSelection:C,isSelected:j})}),x&&!(s!=null&&s.length)&&r&&e.jsx(I,{justifyContent:"flex-start",marginBottom:"$3",marginLeft:"$3",children:e.jsx(b,{onPress:()=>n(r),chromeless:!0,icon:e.jsx(X,{}),children:r})})]})})});function G({options:i,isSelected:u,onChangeSelection:h}){return e.jsx(D,{borderRadius:0,children:i.map((l,x)=>e.jsx(D.Item,{children:e.jsx(le,{hoverTheme:!0,pressTheme:!0,focusTheme:!0,cursor:"pointer",icon:u(l)?e.jsx(re,{}):e.jsx(ae,{}),onPress:()=>h(l),children:e.jsx(ue,{cursor:"pointer",children:l.label})})},l.value))})}export{he as L,_ as a,ve as b};

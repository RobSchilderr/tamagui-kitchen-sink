import{c as Y,s as H,u as P,j as o,g as T,e as U,d as L,X as J,Y as Q}from"./Stacks-cf55noxu.js";import{C as Z}from"./index.esm-qGf7LkUX.js";import{r as l}from"./index-4g5l5LRQ.js";import{M as ee,b as te}from"./LmGrid--faLWKbq.js";import{T as B,g as oe,c as re,b as D,o as ne,E as ae,u as se,F as ie,w as de}from"./index-_wg5PwQV.js";import{u as le}from"./index-RduBmlIh.js";import{u as ce,L as ue}from"./usePopoverState-znF3ooTh.js";import{P as be}from"./Headings-zc2v6h-R.js";var Ce={};const g=Y({size:"$true",scaleIcon:1});function p(e){return e==="indeterminate"}function q(e){return p(e)?"indeterminate":e?"checked":"unchecked"}const _=e=>{const{checked:t,bubbles:i=!0,control:b,isHidden:s,...C}=e,c=l.useRef(null),r=le(t);return l.useEffect(()=>{const n=c.current,a=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(a,"checked").set;if(r!==t&&d){const u=new Event("click",{bubbles:i});n.indeterminate=p(t),d.call(n,p(t)?!1:t),n.dispatchEvent(u)}},[r,t,i]),o.jsx("input",{type:"checkbox",defaultChecked:p(t)?!1:t,...C,tabIndex:-1,ref:c,"aria-hidden":s,style:{...s?{position:"absolute",pointerEvents:"none",opacity:0,margin:0}:{appearance:"auto",accentColor:"var(--color6)"},...e.style}})},v="CheckboxIndicator",A=H(B,{name:v,context:g}),N=A.extractable(l.forwardRef((e,t)=>{const{__scopeCheckbox:i,children:b,forceMount:s,disablePassStyles:C,...c}=e,r=me(v,i),n=l.useContext(g),a=(typeof n.size=="number"?n.size*.65:oe(n.size))*n.scaleIcon,d=P(),u=re({size:a,color:d.color}),k=l.Children.toArray(b).map(h=>C||!l.isValidElement(h)?h:u(h));return s||p(r.state)||r.state===!0?o.jsx(A,{"data-state":q(r.state),"data-disabled":r.disabled?"":void 0,pointerEvents:"none",...c,ref:t,children:k}):null}));N.displayName=v;const z="Checkbox",F=H(B,{name:z,tag:"button",context:g,variants:{unstyled:{false:{size:"$true",backgroundColor:"$background",alignItems:"center",justifyContent:"center",pressTheme:!0,focusable:!0,borderWidth:1,borderColor:"$borderColor",hoverStyle:{borderColor:"$borderColorHover"},focusStyle:{borderColor:"$borderColorFocus",outlineStyle:"solid",outlineWidth:2,outlineColor:"$outlineColor"}}},disabled:{true:{pointerEvents:"none",userSelect:"none",cursor:"not-allowed",hoverStyle:{borderColor:"$borderColor",backgroundColor:"$background"},pressStyle:{borderColor:"$borderColor",backgroundColor:"$backgroundColor"},focusStyle:{outlineWidth:0}}},size:{"...size":(e,{tokens:t})=>({borderRadius:T(D(e))/8})}},defaultVariants:{unstyled:Ce.TAMAGUI_HEADLESS==="1"}}),[fe,Ee]=ne(z),[he,me]=fe(z),pe=F.styleable(function(e,t){const{__scopeCheckbox:i,labelledBy:b,name:s,checked:C,defaultChecked:c,required:r,scaleSize:n=.45,sizeAdjust:a=0,disabled:d,value:u="on",onCheckedChange:k,native:h,scaleIcon:j,...O}=e,V=l.useContext(ae),[S,K]=l.useState(null),W=U(t,m=>K(m)),y=l.useRef(!1),I=se(e),E=S?!!S.closest("form"):!0,[x=!1,X]=ie({prop:C,defaultProp:c,onChange:k}),f=l.useContext(g),$=T(D(I.size??(f==null?void 0:f.size)??"$true",{shift:a})),R=n?Math.round($*n):$,G=ce(S);return o.jsx(he,{scope:i,state:x,disabled:!!d,children:h?o.jsx(_,{control:S,bubbles:!y.current,name:s,value:u,checked:x,required:r,disabled:d,id:e.id}):o.jsxs(o.Fragment,{children:[o.jsx(F,{width:R,height:R,tag:V?"span":"button",role:"checkbox","aria-labelledby":b||G,"aria-checked":p(x)?"mixed":x,"aria-required":r,"data-state":q(x),"data-disabled":d?"":void 0,disabled:d,...O,ref:W,type:"button",value:u,onKeyDown:L(e.onKeyDown,m=>{m.key==="Enter"&&m.preventDefault()}),onPress:L(e.onPress,m=>{X(w=>p(w)?!0:!w),E&&(y.current=m.isPropagationStopped(),y.current||m.stopPropagation())}),children:o.jsx(g.Provider,{size:I.size??(f==null?void 0:f.size)??"$true",scaleIcon:j??(f==null?void 0:f.scaleIcon)??1,children:I.children})}),E?o.jsx(_,{isHidden:!0,control:S,bubbles:!y.current,name:s,value:u,checked:x,required:r,disabled:d}):null]})})}),M=de(pe,{Indicator:N,Props:g.Provider});function xe({label:e,onChange:t,error:i,helperText:b,size:s="$3",value:C,required:c,theme:r,helperTextProps:n,checkboxProps:a,labelProps:d,disabled:u,...k}){const h=l.useId();return o.jsxs(J,{space:!0,alignItems:"center",...k,children:[o.jsx(M,{id:h,theme:i?"red":r,...a,disabled:u,defaultChecked:C||(a==null?void 0:a.defaultChecked),borderColor:i?"$red8":(a==null?void 0:a.borderColor)??"$borderColor",size:s,onCheckedChange:j=>{typeof t=="function"&&t(j)},children:o.jsx(M.Indicator,{children:(a==null?void 0:a.checked)==="indeterminate"?o.jsx(ee,{}):o.jsx(te,{})})}),e&&o.jsxs(Q,{children:[o.jsxs(ue,{size:s,htmlFor:h,...d,disabled:u,children:[c?"* ":"",e]}),b&&o.jsx(be,{paddingLeft:"$2",marginTop:0,size:s,...n,color:i?"$red10":n==null?void 0:n.color,children:b})]})]})}function $e({name:e,rules:t={},control:i,defaultValue:b,...s}){return s.required&&(t.required="This field is required"),o.jsx(Z,{name:e,rules:t,control:i,defaultValue:b,render:({field:{onChange:C,value:c},fieldState:{error:r}})=>o.jsx(xe,{...s,value:c??!1,error:!!r,onChange:C,helperText:r?r.message:s.helperText})})}export{xe as L,$e as a};

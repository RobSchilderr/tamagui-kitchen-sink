import{D as H,S as w,_ as I,a as ve,T as ge,u as he,V as J,c as me}from"./EventEmitter-8bYFdwfg.js";import{_ as be}from"./extends-dGVwEr9R.js";import{r as u}from"./index-4g5l5LRQ.js";var Se=[];function X(e){return Se[e-1]}var ye=/^data:/;class s{static has(t){var r=s._entries,a=ye.test(t);return a||!!r[t]}static add(t){var r=s._entries,a=Date.now();r[t]?(r[t].lastUsedTimestamp=a,r[t].refCount+=1):r[t]={lastUsedTimestamp:a,refCount:1}}static remove(t){var r=s._entries;r[t]&&(r[t].refCount-=1),s._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var t=s._entries,r=Object.keys(t);if(r.length+1>s._maximumEntries){var a,n;r.forEach(o=>{var l=t[o];(!n||l.lastUsedTimestamp<n.lastUsedTimestamp)&&l.refCount===0&&(a=o,n=l)}),a&&delete t[a]}}}s._maximumEntries=256;s._entries={};var P=0,D={},E={abort(e){var t=D[""+e];t&&(t.onerror=null,t.onload=null,t=null,delete D[""+e])},getSize(e,t,r){var a=!1,n=setInterval(l,16),o=E.load(e,l,v);function l(){var d=D[""+o];if(d){var i=d.naturalHeight,c=d.naturalWidth;i&&c&&(t(c,i),a=!0)}a&&(E.abort(o),clearInterval(n))}function v(){typeof r=="function"&&r(),E.abort(o),clearInterval(n)}},has(e){return s.has(e)},load(e,t,r){P+=1;var a=new window.Image;return a.onerror=r,a.onload=n=>{var o=()=>t({nativeEvent:n});typeof a.decode=="function"?a.decode().then(o,o):setTimeout(o,0)},a.src=e,D[""+P]=a,P},prefetch(e){return new Promise((t,r)=>{E.load(e,()=>{s.add(e),s.remove(e),t()},r)})},queryCache(e){var t={};return e.forEach(r=>{s.has(r)&&(t[r]="disk/memory")}),Promise.resolve(t)}};const m=E;class L{static get(){return H.get("window").scale}static getFontScale(){return H.get("window").fontScale||L.get()}static getPixelSizeForLayoutSize(t){return Math.round(t*L.get())}static roundToNearestPixel(t){var r=L.get();return Math.round(t*r)/r}}var pe=["aria-label","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],Ee="ERRORED",A="LOADED",Q="LOADING",we="IDLE",Le=0,ze=/^(data:image\/svg\+xml;utf8,)(.*)/;function xe(e,t){return e&&t!=null?u.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},u.createElement("defs",null,u.createElement("filter",{id:"tint-"+t,suppressHydrationWarning:!0},u.createElement("feFlood",{floodColor:""+e,key:e}),u.createElement("feComposite",{in2:"SourceAlpha",operator:"atop"})))):null}function ke(e,t,r,a){var n=w.flatten(e),o=n.filter,l=n.resizeMode,v=n.shadowOffset,d=n.tintColor;n.resizeMode,n.tintColor;var i=[],c=null;if(o&&i.push(o),t&&i.push("blur("+t+"px)"),v){var h=me(n);h&&i.push("drop-shadow("+h+")")}return(a||d)&&r!=null&&i.push("url(#tint-"+r+")"),i.length>0&&(c=i.join(" ")),[l,c,d]}function Ie(e){if(typeof e=="number"){var t=X(e),r=t.height,a=t.width;return{height:r,width:a}}else if(e!=null&&!Array.isArray(e)&&typeof e=="object"){var n=e.height,o=e.width;return{height:n,width:o}}}function T(e){var t=null;if(typeof e=="number"){var r=X(e);if(r==null)throw new Error('Image: asset with ID "'+e+'" could not be found. Please check the image source or packager.');var a=r.scales[0];if(r.scales.length>1){var n=L.get();a=r.scales.reduce((c,h)=>Math.abs(h-n)<Math.abs(c-n)?h:c)}var o=a!==1?"@"+a+"x":"";t=r?r.httpServerLocation+"/"+r.name+o+"."+r.type:""}else typeof e=="string"?t=e:e&&typeof e.uri=="string"&&(t=e.uri);if(t){var l=t.match(ze);if(l){var v=l[1],d=l[2],i=encodeURIComponent(d);return""+v+i}}return t}var Y=u.forwardRef((e,t)=>{var r=e["aria-label"],a=e.blurRadius,n=e.defaultSource,o=e.draggable,l=e.onError,v=e.onLayout,d=e.onLoad,i=e.onLoadEnd,c=e.onLoadStart,h=e.pointerEvents,R=e.source,_=e.style,Z=ve(e,pe),N=u.useState(()=>{var f=T(R);if(f!=null){var g=m.has(f);if(g)return A}return we}),j=N[0],z=N[1],q=u.useState({}),F=q[0],K=q[1],ee=u.useContext(ge),M=u.useRef(null),B=u.useRef(Le++),b=u.useRef(null),te=j===A||j===Q&&n==null,O=ke(_,a,B.current,e.tintColor),re=O[0],ae=O[1],ne=O[2],S=e.resizeMode||re||"cover",oe=e.tintColor||ne,U=te?R:n,x=T(U),ie=Ie(U),le=x?'url("'+x+'")':null,V=se(),ue=x?he("img",{alt:r||"",style:p.accessibilityImage$raw,draggable:o||!1,ref:M,src:x}):null;function se(){if(M.current!=null&&(S==="center"||S==="repeat")){var f=M.current,g=f.naturalHeight,y=f.naturalWidth,$=F.height,G=F.width;if(g&&y&&$&&G){var W=Math.min(1,G/y,$/g),ce=Math.ceil(W*y),fe=Math.ceil(W*g);return ce+"px "+fe+"px"}}}function de(f){if(S==="center"||S==="repeat"||v){var g=f.nativeEvent.layout;v&&v(f),K(g)}}var k=T(R);return u.useEffect(()=>{f(),k!=null&&(z(Q),c&&c(),b.current=m.load(k,function(y){z(A),d&&d(y),i&&i()},function(){z(Ee),l&&l({nativeEvent:{error:"Failed to load resource "+k+" (404)"}}),i&&i()}));function f(){b.current!=null&&(m.abort(b.current),b.current=null)}return f},[k,b,z,l,d,i,c]),u.createElement(J,be({},Z,{"aria-label":r,onLayout:de,pointerEvents:h,ref:t,style:[p.root,ee&&p.inline,ie,_,p.undo,{boxShadow:null}]}),u.createElement(J,{style:[p.image,De[S],{backgroundImage:le,filter:ae},V!=null&&{backgroundSize:V}],suppressHydrationWarning:!0}),ue,xe(oe,B.current))});Y.displayName="Image";var C=Y;C.getSize=function(e,t,r){m.getSize(e,t,r)};C.prefetch=function(e){return m.prefetch(e)};C.queryCache=function(e){return m.queryCache(e)};var p=w.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:I(I({},w.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:I(I({},w.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),De=w.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}});const Oe=C;export{L as P,Oe as R,X as g};

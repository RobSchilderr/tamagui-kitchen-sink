import{a as k}from"./chunk-WFFRPTHA-Km4WEIcQ.js";import{j as l,S as w,X as D}from"./Stacks-0gbGCfo_.js";import"./index-o7np2shc.js";import{r as y}from"./index-4g5l5LRQ.js";import"./index-LvVOA0P4.js";import"./EventEmitter-8bYFdwfg.js";import{P as L}from"./PermissionsInterface-mZs7V1IP.js";import{L as p}from"./LmGrid-eqtElkhI.js";import{L as P}from"./ListItem-ZhdiTpgl.js";import"./preview-errors-KFwZ_tMd.js";import"./index-PPLHz8o0.js";import"./v4-cyCr5FZV.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./extends-dGVwEr9R.js";import"./Headings-cv8zjVaZ.js";import"./index-iwWdm5Ml.js";import"./toPropertyKey-k__UqEPR.js";const S={get name(){return"ExpoDocumentPicker"},async getDocumentAsync({type:t="*/*",multiple:a=!1}){if(!L.isDOMAvailable)return{canceled:!0,assets:null};const e=document.createElement("input");return e.style.display="none",e.setAttribute("type","file"),e.setAttribute("accept",Array.isArray(t)?t.join(","):t),e.setAttribute("id",String(Math.random())),a&&e.setAttribute("multiple","multiple"),document.body.appendChild(e),new Promise((i,s)=>{e.addEventListener("change",async()=>{if(e.files){const o=[];for(let r=0;r<e.files.length;r++)o.push(v(e.files[r]));try{const r=await Promise.all(o);i({canceled:!1,assets:r,output:e.files})}catch(r){s(r)}}else i({canceled:!0,assets:null});document.body.removeChild(e)});const c=new MouseEvent("click");e.dispatchEvent(c)})}};function v(t){return new Promise((a,e)=>{const i=t.type,s=new FileReader;s.onerror=()=>{e(new Error("Failed to read the selected media because the operation failed."))},s.onload=({target:c})=>{const o=c.result;a({uri:o,mimeType:i,name:t.name,lastModified:t.lastModified,size:t.size,file:t})},s.readAsDataURL(t)})}async function C({type:t="*/*",copyToCacheDirectory:a=!0,multiple:e=!1}={}){return typeof t=="string"&&(t=[t]),await S.getDocumentAsync({type:t,copyToCacheDirectory:a,multiple:e})}function M({documentPickerOptions:t,label:a,onChange:e,...i}){return l.jsx(p,{...i,onPress:async()=>{try{const s=await C({...t});s&&e?e(s):console.log(s)}catch(s){console.log(s)}},children:a})}function F({pickerButtonProps:t={label:"Pick File"},uploadButtonProps:a={label:"Upload"},onUpload:e,containerProps:i,directUpload:s,cancelButtonProps:c={label:"Cancel"}}){const[o,r]=y.useState(null),[E,u]=y.useState(!1),f=async n=>{u(!0),await e(n),u(!1)},h=(o==null?void 0:o.output)??[];return l.jsxs(w,{...i,children:[h.length>0&&Array.from(h).map(n=>l.jsx(P,{title:n.name,subTitle:n.type},n.name+n.size)),(o==null?void 0:o.canceled)===!1?l.jsxs(D,{space:"$2",children:[l.jsx(p,{...c,onPress:()=>{r(null)},children:c==null?void 0:c.label}),l.jsx(p,{...a,loading:E,onPress:()=>f(o),children:a.label})]}):l.jsx(M,{...t,onChange:n=>{if(s)return f(n);console.log({files:n}),r(n)}})]})}const Y={title:"file/File Picker",component:F},d={args:{onUpload:k("upload")}},m={args:{pickerButtonProps:{label:"Choose Avatar"},directUpload:!0,onUpload:k("upload")}};var b,g,A;d.parameters={...d.parameters,docs:{...(b=d.parameters)==null?void 0:b.docs,source:{originalSource:`{
  args: {
    onUpload: action('upload')
  }
}`,...(A=(g=d.parameters)==null?void 0:g.docs)==null?void 0:A.source}}};var x,U,j;m.parameters={...m.parameters,docs:{...(x=m.parameters)==null?void 0:x.docs,source:{originalSource:`{
  args: {
    pickerButtonProps: {
      label: 'Choose Avatar'
    },
    directUpload: true,
    onUpload: action('upload')
  }
}`,...(j=(U=m.parameters)==null?void 0:U.docs)==null?void 0:j.source}}};const Z=["Basic","DirectUpload"];export{d as Basic,m as DirectUpload,Z as __namedExportsOrder,Y as default};

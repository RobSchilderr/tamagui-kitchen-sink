var Le=Object.defineProperty;var Me=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var c=(e,t,n)=>(Me(e,typeof t!="symbol"?t+"":t,n),n);import{r as m}from"./index-4g5l5LRQ.js";import{a as A,P as S}from"./PermissionsInterface-mZs7V1IP.js";import{R as ne}from"./RCTDeviceEventEmitter-ts_vhi28.js";import{P as J,g as de,R as Ce}from"./index-gD03JQuG.js";import{g as he,c as se}from"./_commonjsHelpers-4gQjN7DL.js";import{r as Ue,u as _e,S as De,V as Te}from"./EventEmitter-8bYFdwfg.js";var Ie=e=>{var t;try{t=Ue.findDOMNode(e)}catch{}return t};const Ne=Ie;var x;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.THREE_GPP=1]="THREE_GPP",e[e.MPEG_4=2]="MPEG_4",e[e.AMR_NB=3]="AMR_NB",e[e.AMR_WB=4]="AMR_WB",e[e.AAC_ADIF=5]="AAC_ADIF",e[e.AAC_ADTS=6]="AAC_ADTS",e[e.RTP_AVP=7]="RTP_AVP",e[e.MPEG2TS=8]="MPEG2TS",e[e.WEBM=9]="WEBM"})(x||(x={}));var F;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.AMR_NB=1]="AMR_NB",e[e.AMR_WB=2]="AMR_WB",e[e.AAC=3]="AAC",e[e.HE_AAC=4]="HE_AAC",e[e.AAC_ELD=5]="AAC_ELD"})(F||(F={}));var j;(function(e){e.LINEARPCM="lpcm",e.AC3="ac-3",e["60958AC3"]="cac3",e.APPLEIMA4="ima4",e.MPEG4AAC="aac ",e.MPEG4CELP="celp",e.MPEG4HVXC="hvxc",e.MPEG4TWINVQ="twvq",e.MACE3="MAC3",e.MACE6="MAC6",e.ULAW="ulaw",e.ALAW="alaw",e.QDESIGN="QDMC",e.QDESIGN2="QDM2",e.QUALCOMM="Qclp",e.MPEGLAYER1=".mp1",e.MPEGLAYER2=".mp2",e.MPEGLAYER3=".mp3",e.APPLELOSSLESS="alac",e.MPEG4AAC_HE="aach",e.MPEG4AAC_LD="aacl",e.MPEG4AAC_ELD="aace",e.MPEG4AAC_ELD_SBR="aacf",e.MPEG4AAC_ELD_V2="aacg",e.MPEG4AAC_HE_V2="aacp",e.MPEG4AAC_SPATIAL="aacs",e.AMR="samr",e.AMR_WB="sawb",e.AUDIBLE="AUDB",e.ILBC="ilbc",e[e.DVIINTELIMA=1836253201]="DVIINTELIMA",e[e.MICROSOFTGSM=1836253233]="MICROSOFTGSM",e.AES3="aes3",e.ENHANCEDAC3="ec-3"})(j||(j={}));var V;(function(e){e[e.MIN=0]="MIN",e[e.LOW=32]="LOW",e[e.MEDIUM=64]="MEDIUM",e[e.HIGH=96]="HIGH",e[e.MAX=127]="MAX"})(V||(V={}));var re;(function(e){e[e.CONSTANT=0]="CONSTANT",e[e.LONG_TERM_AVERAGE=1]="LONG_TERM_AVERAGE",e[e.VARIABLE_CONSTRAINED=2]="VARIABLE_CONSTRAINED",e[e.VARIABLE=3]="VARIABLE"})(re||(re={}));const ke={isMeteringEnabled:!0,android:{extension:".m4a",outputFormat:x.MPEG_4,audioEncoder:F.AAC,sampleRate:44100,numberOfChannels:2,bitRate:128e3},ios:{extension:".m4a",outputFormat:j.MPEG4AAC,audioQuality:V.MAX,sampleRate:44100,numberOfChannels:2,bitRate:128e3,linearPCMBitDepth:16,linearPCMIsBigEndian:!1,linearPCMIsFloat:!1},web:{mimeType:"audio/webm",bitsPerSecond:128e3}},xe={isMeteringEnabled:!0,android:{extension:".3gp",outputFormat:x.THREE_GPP,audioEncoder:F.AMR_NB,sampleRate:44100,numberOfChannels:2,bitRate:128e3},ios:{extension:".caf",audioQuality:V.MIN,sampleRate:44100,numberOfChannels:2,bitRate:128e3,linearPCMBitDepth:16,linearPCMIsBigEndian:!1,linearPCMIsFloat:!1},web:{mimeType:"audio/webm",bitsPerSecond:128e3}},Fe={HIGH_QUALITY:ke,LOW_QUALITY:xe};async function Ve(e){if(!navigator||!navigator.permissions||!navigator.permissions.query)return null;try{const{state:t}=await navigator.permissions.query({name:e});switch(t){case"granted":return A.GRANTED;case"denied":return A.DENIED;default:return A.UNDETERMINED}}catch{return A.UNDETERMINED}}function ie(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);const t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){const n=new Error("Permission unimplemented");throw n.code=0,n.name="NotAllowedError",n};return new Promise((n,s)=>{t.call(navigator,e,n,s)})}function P(e){if(!e)return{isLoaded:!1,error:void 0};const t=e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2;return{isLoaded:!0,uri:e.src,progressUpdateIntervalMillis:100,durationMillis:e.duration*1e3,positionMillis:e.currentTime*1e3,shouldPlay:e.autoplay,isPlaying:t,isBuffering:!1,rate:e.playbackRate,shouldCorrectPitch:!1,volume:e.volume,audioPan:0,isMuted:e.muted,isLooping:e.loop,didJustFinish:e.ended}}async function L(e,t){return t.positionMillis!==void 0&&(e.currentTime=t.positionMillis/1e3),t.shouldPlay!==void 0&&(t.shouldPlay?await e.play():await e.pause()),t.rate!==void 0&&(e.playbackRate=t.rate),t.volume!==void 0&&(e.volume=t.volume),t.isMuted!==void 0&&(e.muted=t.isMuted),t.isLooping!==void 0&&(e.loop=t.isLooping),P(e)}let f=null,_=0,C=0,U=!1;function W(){let e=C;return U&&_>0&&(e+=Date.now()-_),e}const y={get name(){return"ExponentAV"},async getStatusForVideo(e){return P(e)},async loadForVideo(e,t,n){return P(e)},async unloadForVideo(e){return P(e)},async setStatusForVideo(e,t){return L(e,t)},async replayVideo(e,t){return L(e,t)},async setAudioMode(){},async setAudioIsEnabled(){},async getStatusForSound(e){return P(e)},async loadForSound(e,t){const n=typeof e=="string"?e:e.uri,s=new Audio(n);s.ontimeupdate=()=>{ne.emit("didUpdatePlaybackStatus",{key:s,status:P(s)})},s.onerror=()=>{ne.emit("ExponentAV.onError",{key:s,error:s.error.message})};const r=await L(s,t);return[s,r]},async unloadForSound(e){return e.pause(),e.removeAttribute("src"),e.load(),P(e)},async setStatusForSound(e,t){return L(e,t)},async replaySound(e,t){return L(e,t)},async getAudioRecordingStatus(){return{canRecord:(f==null?void 0:f.state)==="recording"||(f==null?void 0:f.state)==="inactive",isRecording:(f==null?void 0:f.state)==="recording",isDoneRecording:!1,durationMillis:W(),uri:null}},async prepareAudioRecorder(e){if(typeof navigator<"u"&&!navigator.mediaDevices)throw new Error("No media devices available");_=0,C=0;const t=await ie({audio:!0});f=new window.MediaRecorder(t,(e==null?void 0:e.web)||Fe.HIGH_QUALITY.web),f.addEventListener("pause",()=>{C=W(),U=!1}),f.addEventListener("resume",()=>{_=Date.now(),U=!0}),f.addEventListener("start",()=>{_=Date.now(),C=0,U=!0}),f.addEventListener("stop",()=>{C=W(),U=!1,t.getTracks().forEach(r=>r.stop())});const{uri:n,...s}=await this.getAudioRecordingStatus();return{uri:null,status:s}},async startAudioRecording(){if(f===null)throw new Error("Cannot start an audio recording without initializing a MediaRecorder. Run prepareToRecordAsync() before attempting to start an audio recording.");return f.state==="paused"?f.resume():f.start(),this.getAudioRecordingStatus()},async pauseAudioRecording(){if(f===null)throw new Error("Cannot start an audio recording without initializing a MediaRecorder. Run prepareToRecordAsync() before attempting to start an audio recording.");return f.pause(),this.getAudioRecordingStatus()},async stopAudioRecording(){if(f===null)throw new Error("Cannot start an audio recording without initializing a MediaRecorder. Run prepareToRecordAsync() before attempting to start an audio recording.");if(f.state==="inactive")return this.getAudioRecordingStatus();const e=new Promise(s=>f.addEventListener("dataavailable",r=>s(r.data)));f.stop();const t=await e,n=URL.createObjectURL(t);return{...await this.getAudioRecordingStatus(),uri:n}},async unloadAudioRecorder(){f=null},async getPermissionsAsync(){switch(await Ve("microphone")){case A.GRANTED:return{status:A.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case A.DENIED:return{status:A.DENIED,expires:"never",canAskAgain:!0,granted:!1};default:return await this.requestPermissionsAsync()}},async requestPermissionsAsync(){try{return(await ie({audio:!0})).getTracks().forEach(t=>t.stop()),{status:A.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch{return{status:A.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}};function v(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function oe(e,t){for(var n="",s=0,r=-1,i=0,o,l=0;l<=e.length;++l){if(l<e.length)o=e.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(r===l-1||i===1))if(r!==l-1&&i===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){u===-1?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf("/")),r=l,i=0;continue}}else if(n.length===2||n.length===1){n="",s=0,r=l,i=0;continue}}t&&(n.length>0?n+="/..":n="..",s=2)}else n.length>0?n+="/"+e.slice(r+1,l):n=e.slice(r+1,l),s=l-r-1;r=l,i=0}else o===46&&i!==-1?++i:i=-1}return n}function Ge(e,t){var n=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+s:n+e+s:s}var R={resolve:function(){for(var t="",n=!1,s,r=arguments.length-1;r>=-1&&!n;r--){var i;r>=0?i=arguments[r]:(s===void 0&&(s=process.cwd()),i=s),v(i),i.length!==0&&(t=i+"/"+t,n=i.charCodeAt(0)===47)}return t=oe(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(v(t),t.length===0)return".";var n=t.charCodeAt(0)===47,s=t.charCodeAt(t.length-1)===47;return t=oe(t,!n),t.length===0&&!n&&(t="."),t.length>0&&s&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return v(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var s=arguments[n];v(s),s.length>0&&(t===void 0?t=s:t+="/"+s)}return t===void 0?".":R.normalize(t)},relative:function(t,n){if(v(t),v(n),t===n||(t=R.resolve(t),n=R.resolve(n),t===n))return"";for(var s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var r=t.length,i=r-s,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var l=n.length,u=l-o,d=i<u?i:u,h=-1,a=0;a<=d;++a){if(a===d){if(u>d){if(n.charCodeAt(o+a)===47)return n.slice(o+a+1);if(a===0)return n.slice(o+a)}else i>d&&(t.charCodeAt(s+a)===47?h=a:a===0&&(h=0));break}var p=t.charCodeAt(s+a),be=n.charCodeAt(o+a);if(p!==be)break;p===47&&(h=a)}var b="";for(a=s+h+1;a<=r;++a)(a===r||t.charCodeAt(a)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+n.slice(o+h):(o+=h,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(v(t),t.length===0)return".";for(var n=t.charCodeAt(0),s=n===47,r=-1,i=!0,o=t.length-1;o>=1;--o)if(n=t.charCodeAt(o),n===47){if(!i){r=o;break}}else i=!1;return r===-1?s?"/":".":s&&r===1?"//":t.slice(0,r)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');v(t);var s=0,r=-1,i=!0,o;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var l=n.length-1,u=-1;for(o=t.length-1;o>=0;--o){var d=t.charCodeAt(o);if(d===47){if(!i){s=o+1;break}}else u===-1&&(i=!1,u=o+1),l>=0&&(d===n.charCodeAt(l)?--l===-1&&(r=o):(l=-1,r=u))}return s===r?r=u:r===-1&&(r=t.length),t.slice(s,r)}else{for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===47){if(!i){s=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(s,r)}},extname:function(t){v(t);for(var n=-1,s=0,r=-1,i=!0,o=0,l=t.length-1;l>=0;--l){var u=t.charCodeAt(l);if(u===47){if(!i){s=l+1;break}continue}r===-1&&(i=!1,r=l+1),u===46?n===-1?n=l:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||r===-1||o===0||o===1&&n===r-1&&n===s+1?"":t.slice(n,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Ge("/",t)},parse:function(t){v(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var s=t.charCodeAt(0),r=s===47,i;r?(n.root="/",i=1):i=0;for(var o=-1,l=0,u=-1,d=!0,h=t.length-1,a=0;h>=i;--h){if(s=t.charCodeAt(h),s===47){if(!d){l=h+1;break}continue}u===-1&&(d=!1,u=h+1),s===46?o===-1?o=h:a!==1&&(a=1):o!==-1&&(a=-1)}return o===-1||u===-1||a===0||a===1&&o===u-1&&o===l+1?u!==-1&&(l===0&&r?n.base=n.name=t.slice(1,u):n.base=n.name=t.slice(l,u)):(l===0&&r?(n.name=t.slice(1,o),n.base=t.slice(1,u)):(n.name=t.slice(l,o),n.base=t.slice(l,u)),n.ext=t.slice(o,u)),l>0?n.dir=t.slice(0,l-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};R.posix=R;var He=R;const qe=he(He);var Be=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},K={},We=Object.prototype.hasOwnProperty,ze;function ae(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function le(e){try{return encodeURIComponent(e)}catch{return null}}function $e(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},s;s=t.exec(e);){var r=ae(s[1]),i=ae(s[2]);r===null||i===null||r in n||(n[r]=i)}return n}function je(e,t){t=t||"";var n=[],s,r;typeof t!="string"&&(t="?");for(r in e)if(We.call(e,r)){if(s=e[r],!s&&(s===null||s===ze||isNaN(s))&&(s=""),r=le(r),s=le(s),r===null||s===null)continue;n.push(r+"="+s)}return n.length?t+n.join("&"):""}K.stringify=je;K.parse=$e;var pe=Be,B=K,Ye=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,ge=/[\n\r\t]/g,Qe=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ye=/:\d+$/,Xe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Ze=/^[a-zA-Z]:/;function O(e){return(e||"").toString().replace(Ye,"")}var Y=[["#","hash"],["?","query"],function(t,n){return E(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ce={hash:1,query:1};function ve(e){var t;typeof window<"u"?t=window:typeof se<"u"?t=se:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var s={},r=typeof e,i;if(e.protocol==="blob:")s=new w(unescape(e.pathname),{});else if(r==="string"){s=new w(e,{});for(i in ce)delete s[i]}else if(r==="object"){for(i in e)i in ce||(s[i]=e[i]);s.slashes===void 0&&(s.slashes=Qe.test(e.href))}return s}function E(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Ae(e,t){e=O(e),e=e.replace(ge,""),t=t||{};var n=Xe.exec(e),s=n[1]?n[1].toLowerCase():"",r=!!n[2],i=!!n[3],o=0,l;return r?i?(l=n[2]+n[3]+n[4],o=n[2].length+n[3].length):(l=n[2]+n[4],o=n[2].length):i?(l=n[3]+n[4],o=n[3].length):l=n[4],s==="file:"?o>=2&&(l=l.slice(2)):E(s)?l=n[4]:s?r&&(l=l.slice(2)):o>=2&&E(t.protocol)&&(l=n[4]),{protocol:s,slashes:r||E(s),slashesCount:o,rest:l}}function Je(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),s=n.length,r=n[s-1],i=!1,o=0;s--;)n[s]==="."?n.splice(s,1):n[s]===".."?(n.splice(s,1),o++):o&&(s===0&&(i=!0),n.splice(s,1),o--);return i&&n.unshift(""),(r==="."||r==="..")&&n.push(""),n.join("/")}function w(e,t,n){if(e=O(e),e=e.replace(ge,""),!(this instanceof w))return new w(e,t,n);var s,r,i,o,l,u,d=Y.slice(),h=typeof t,a=this,p=0;for(h!=="object"&&h!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=B.parse),t=ve(t),r=Ae(e||"",t),s=!r.protocol&&!r.slashes,a.slashes=r.slashes||s&&t.slashes,a.protocol=r.protocol||t.protocol||"",e=r.rest,(r.protocol==="file:"&&(r.slashesCount!==2||Ze.test(e))||!r.slashes&&(r.protocol||r.slashesCount<2||!E(a.protocol)))&&(d[3]=[/(.*)/,"pathname"]);p<d.length;p++){if(o=d[p],typeof o=="function"){e=o(e,a);continue}i=o[0],u=o[1],i!==i?a[u]=e:typeof i=="string"?(l=i==="@"?e.lastIndexOf(i):e.indexOf(i),~l&&(typeof o[2]=="number"?(a[u]=e.slice(0,l),e=e.slice(l+o[2])):(a[u]=e.slice(l),e=e.slice(0,l)))):(l=i.exec(e))&&(a[u]=l[1],e=e.slice(0,l.index)),a[u]=a[u]||s&&o[3]&&t[u]||"",o[4]&&(a[u]=a[u].toLowerCase())}n&&(a.query=n(a.query)),s&&t.slashes&&a.pathname.charAt(0)!=="/"&&(a.pathname!==""||t.pathname!=="")&&(a.pathname=Je(a.pathname,t.pathname)),a.pathname.charAt(0)!=="/"&&E(a.protocol)&&(a.pathname="/"+a.pathname),pe(a.port,a.protocol)||(a.host=a.hostname,a.port=""),a.username=a.password="",a.auth&&(l=a.auth.indexOf(":"),~l?(a.username=a.auth.slice(0,l),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=a.auth.slice(l+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(a.auth)),a.auth=a.password?a.username+":"+a.password:a.username),a.origin=a.protocol!=="file:"&&E(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString()}function Ke(e,t,n){var s=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||B.parse)(t)),s[e]=t;break;case"port":s[e]=t,pe(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,ye.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!n;break;case"pathname":case"hash":if(t){var r=e==="pathname"?"/":"#";s[e]=t.charAt(0)!==r?r+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(s.username=t.slice(0,i),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(i+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var o=0;o<Y.length;o++){var l=Y[o];l[4]&&(s[l[1]]=s[l[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin=s.protocol!=="file:"&&E(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s}function Oe(e){(!e||typeof e!="function")&&(e=B.stringify);var t,n=this,s=n.host,r=n.protocol;r&&r.charAt(r.length-1)!==":"&&(r+=":");var i=r+(n.protocol&&n.slashes||E(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):n.protocol!=="file:"&&E(n.protocol)&&!s&&n.pathname!=="/"&&(i+="@"),(s[s.length-1]===":"||ye.test(n.hostname)&&!n.port)&&(s+=":"),i+=s+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(i+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(i+=n.hash),i}w.prototype={set:Ke,toString:Oe};w.extractProtocol=Ae;w.location=ve;w.trimLeft=O;w.qs=B;var et=w;const Q=he(et);function tt(e){const t=I.pickScale(e.scales,J.get()),n=t===1?"":"@"+t+"x",s=e.type?`.${e.type}`:"";return e.httpServerLocation.replace(/\.\.\//g,"_")+"/"+e.name+n+s}class I{constructor(t,n,s){c(this,"serverUrl");c(this,"jsbundleUrl");c(this,"asset");this.serverUrl=t||"https://expo.dev",this.jsbundleUrl=null,this.asset=s}isLoadedFromServer(){return!0}isLoadedFromFileSystem(){return!1}defaultAsset(){return this.assetServerURL()}assetServerURL(){const t=new URL(tt(this.asset),this.serverUrl);return t.searchParams.set("platform",S.OS),t.searchParams.set("hash",this.asset.hash),this.fromSource(t.toString().replace(t.origin,""))}fromSource(t){return{__packager_asset:!0,width:this.asset.width??void 0,height:this.asset.height??void 0,uri:t,scale:I.pickScale(this.asset.scales,J.get())}}static pickScale(t,n){for(let s=0;s<t.length;s++)if(t[s]>=n)return t[s];return t[t.length-1]||1}}async function nt(e,t,n,s){return e}function k(){return{}}function st(){return{}}const z=k().assetMapOverride;function rt(e){var h,a;z&&z.hasOwnProperty(e.hash)&&(e={...e,...z[e.hash]});const t=I.pickScale(e.scales,J.get()),n=e.scales.findIndex(p=>p===t),s=e.fileHashes?e.fileHashes[n]||e.fileHashes[0]:e.hash,r=e.fileUris?e.fileUris[n]||e.fileUris[0]:e.uri;if(r)return{uri:r,hash:s};const i=k().assetUrlOverride;if(i){const p=qe.join(i,s);return{uri:p,hash:s}}const o=t===1?"":`@${t}x`,l=e.type?`.${encodeURIComponent(e.type)}`:"",u=`/${encodeURIComponent(e.name)}${o}${l}?platform=${encodeURIComponent(S.OS)}&hash=${encodeURIComponent(e.hash)}`;if(/^https?:\/\//.test(e.httpServerLocation))return{uri:e.httpServerLocation+u,hash:s};const d=st();if((a=(h=d==null?void 0:d.extra)==null?void 0:h.expoGo)!=null&&a.developer){const p=new Q(`http://${d.extra.expoGo.debuggerHost}`);return p.set("pathname",e.httpServerLocation+u),{uri:p.href,hash:s}}if(k().developer){const p=new Q(k().bundleUrl);return p.set("pathname",e.httpServerLocation+u),{uri:p.href,hash:s}}return{uri:`https://classic-assets.eascdn.net/~assets/${encodeURIComponent(s)}`,hash:s}}function T(e){const{pathname:t}=new Q(e,{});return t.substring(t.lastIndexOf("/")+1)}function ue(e){const t=T(e),n=t.lastIndexOf(".");return n>0?t.substring(n):""}function it(e){return/^(jpeg|jpg|gif|png|bmp|webp|heic)$/i.test(e)}function ot(e){return S.isDOMAvailable?new Promise((t,n)=>{const s=new Image;s.onerror=n,s.onload=()=>{t({name:T(e),width:s.naturalWidth,height:s.naturalHeight})},s.src=e}):Promise.resolve({name:T(e),width:0,height:0})}function at(e,t){return null}let X;function lt(e){X=e}function Ee(e){if(typeof e=="object")return e;const t=de(e);if(!t)return;const n=new I("https://expo.dev",null,t);return X?X(n):n.defaultAsset()}Object.defineProperty(Ee,"setCustomSourceTransformer",{get(){return lt}});const g=class g{constructor({name:t,type:n,hash:s=null,uri:r,width:i,height:o}){c(this,"name");c(this,"type");c(this,"hash",null);c(this,"uri");c(this,"localUri",null);c(this,"width",null);c(this,"height",null);c(this,"downloading",!1);c(this,"downloaded",!1);c(this,"_downloadCallbacks",[]);this.name=t,this.type=n,this.hash=s,this.uri=r,typeof i=="number"&&(this.width=i),typeof o=="number"&&(this.height=o),s&&(this.localUri=at(),this.localUri&&(this.downloaded=!0)),S.OS==="web"&&(t||(this.name=T(r)),n||(this.type=ue(r)))}static loadAsync(t){const n=Array.isArray(t)?t:[t];return Promise.all(n.map(s=>g.fromModule(s).downloadAsync()))}static fromModule(t){if(typeof t=="string")return g.fromURI(t);const n=de(t);if(!n)throw new Error(`Module "${t}" is missing from the asset registry`);{const{uri:s}=Ee(t),r=new g({name:n.name,type:n.type,hash:n.hash,uri:s,width:n.width,height:n.height});return S.OS==="android"&&!s.includes(":")&&(n.width||n.height)&&(r.localUri=r.uri,r.downloaded=!0),g.byHash[n.hash]=r,r}}static fromMetadata(t){const n=t.hash;if(g.byHash[n])return g.byHash[n];const{uri:s,hash:r}=rt(t),i=new g({name:t.name,type:t.type,hash:r,uri:s,width:t.width,height:t.height});return g.byHash[n]=i,i}static fromURI(t){if(g.byUri[t])return g.byUri[t];let n="";if(t.indexOf(";base64")>-1)n=t.split(";")[0].split("/")[1];else{const r=ue(t);n=r.startsWith(".")?r.substring(1):r}const s=new g({name:"",type:n,hash:null,uri:t});return g.byUri[t]=s,s}async downloadAsync(){if(this.downloaded)return this;if(this.downloading)return await new Promise((t,n)=>{this._downloadCallbacks.push({resolve:t,reject:n})}),this;this.downloading=!0;try{if(S.OS==="web")if(it(this.type)){const{width:t,height:n,name:s}=await ot(this.uri);this.width=t,this.height=n,this.name=s}else this.name=T(this.uri);this.localUri=await nt(this.uri,this.hash,this.type,this.name),this.downloaded=!0,this._downloadCallbacks.forEach(({resolve:t})=>t())}catch(t){throw this._downloadCallbacks.forEach(({reject:n})=>n(t)),t}finally{this.downloading=!1,this._downloadCallbacks=[]}return this}};c(g,"byHash",{}),c(g,"byUri",{});let G=g;var Z;(function(e){e[e.Low=y&&y.Qualities&&y.Qualities.Low]="Low",e[e.Medium=y&&y.Qualities&&y.Qualities.Medium]="Medium",e[e.High=y&&y.Qualities&&y.Qualities.High]="High"})(Z||(Z={}));const ct=500,fe={positionMillis:0,progressUpdateIntervalMillis:ct,shouldPlay:!1,rate:1,shouldCorrectPitch:!1,volume:1,audioPan:0,isMuted:!1,isLooping:!1};function we(e){let t=null,n=null,s;if(typeof e=="string"&&S.OS==="web")return{uri:e,overridingExtension:n,headers:s};const r=me(e);return r!=null?t=r.localUri||r.uri:e!=null&&typeof e!="number"&&"uri"in e&&typeof e.uri=="string"&&(t=e.uri),t==null?null:(e!=null&&typeof e!="number"&&"overrideFileExtensionAndroid"in e&&typeof e.overrideFileExtensionAndroid=="string"&&(n=e.overrideFileExtensionAndroid),e!=null&&typeof e!="number"&&"headers"in e&&typeof e.headers=="object"&&(s=e.headers),{uri:t,overridingExtension:n,headers:s})}function me(e){if(e==null)return null;let t=null;return typeof e=="number"?t=G.fromModule(e):e instanceof G&&(t=e),t}function Se(e){if(typeof e.rate=="number"&&(e.rate<0||e.rate>32))throw new RangeError("Rate value must be between 0.0 and 32.0");if(typeof e.volume=="number"&&(e.volume<0||e.volume>1))throw new RangeError("Volume value must be between 0.0 and 1.0");if(typeof e.audioPan=="number"&&(e.audioPan<-1||e.audioPan>1))throw new RangeError("Pan value must be between -1.0 and 1.0")}async function ut(e,t,n){const s=t==null?fe:{...fe,...t};if(Se(s),typeof e=="string"&&S.OS==="web")return{nativeSource:{uri:e,overridingExtension:null},fullInitialStatus:s};const r=me(e);n&&r&&await r.downloadAsync();const i=we(e);if(i===null)throw new Error("Cannot load an AV asset from a null playback source");return r&&r.localUri&&(i.uri=r.localUri),{nativeSource:i,fullInitialStatus:s}}function ft(e=null){return{isLoaded:!1,...e?{error:e}:null}}const dt={async playAsync(){return this.setStatusAsync({shouldPlay:!0})},async playFromPositionAsync(e,t={}){return this.setStatusAsync({positionMillis:e,shouldPlay:!0,seekMillisToleranceAfter:t.toleranceMillisAfter,seekMillisToleranceBefore:t.toleranceMillisBefore})},async pauseAsync(){return this.setStatusAsync({shouldPlay:!1})},async stopAsync(){return this.setStatusAsync({positionMillis:0,shouldPlay:!1})},async setPositionAsync(e,t={}){return this.setStatusAsync({positionMillis:e,seekMillisToleranceAfter:t.toleranceMillisAfter,seekMillisToleranceBefore:t.toleranceMillisBefore})},async setRateAsync(e,t=!1,n=Z.Low){return this.setStatusAsync({rate:e,shouldCorrectPitch:t,pitchCorrectionQuality:n})},async setVolumeAsync(e,t){return this.setStatusAsync({volume:e,audioPan:t})},async setIsMutedAsync(e){return this.setStatusAsync({isMuted:e})},async setIsLoopingAsync(e){return this.setStatusAsync({isLooping:e})},async setProgressUpdateIntervalAsync(e){return this.setStatusAsync({progressUpdateIntervalMillis:e})}},ee=e=>"requestFullscreen"in e,H=e=>"webkitEnterFullScreen"in e,te=e=>"msRequestFullscreen"in e,ht=()=>pt("video","webkitfullscreenchange");function M(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}const pt=(e,t)=>{const n=document.createElement(e);return n.setAttribute("on"+t,"return;"),typeof n["on"+t]=="function"};async function gt(e){var t,n;if(ee(e))return e.requestFullscreen();if(H(e))(t=e.webkitEnterFullScreen)==null||t.call(e);else if(te(e))(n=e.msRequestFullscreen)==null||n.call(e);else throw new Error("Fullscreen not supported")}async function yt(e){var t,n;if(ee(e))return document.exitFullscreen();if(H(e))(t=e.webkitExitFullScreen)==null||t.call(e);else if(te(e))(n=document.msExitFullscreen)==null||n.call(document);else throw new Error("Fullscreen not supported")}function vt(e,t){if(ee(e))return M(e,"fullscreenchange",n=>t(document.fullscreenElement===n.target));if(H(e)&&ht())return M(e,"webkitfullscreenchange",n=>t(document.webkitFullscreenElement===n.target));if(H(e)){const n=M(e,"webkitbeginfullscreen",()=>t(!0)),s=M(e,"webkitendfullscreen",()=>t(!1));return()=>{n(),s()}}else return te(e)?M(document,"MSFullscreenChange",n=>t(document.msFullscreenElement===n.target)):()=>{}}const Pe={get name(){return"ExpoVideoManager"},get ScaleNone(){return"none"},get ScaleToFill(){return"fill"},get ScaleAspectFit(){return"contain"},get ScaleAspectFill(){return"cover"},async setFullscreen(e,t){return t?await gt(e):await yt(e),y.getStatusForVideo(e)}};var D;(function(e){e.CONTAIN="contain",e.COVER="cover",e.STRETCH="stretch"})(D||(D={}));var q;(function(e){e[e.PLAYER_WILL_PRESENT=0]="PLAYER_WILL_PRESENT",e[e.PLAYER_DID_PRESENT=1]="PLAYER_DID_PRESENT",e[e.PLAYER_WILL_DISMISS=2]="PLAYER_WILL_DISMISS",e[e.PLAYER_DID_DISMISS=3]="PLAYER_DID_DISMISS"})(q||(q={}));const At=m.forwardRef((e,t)=>_e("video",{...e,ref:t}));class Et extends m.Component{constructor(){super(...arguments);c(this,"_video");c(this,"_removeFullscreenListener");c(this,"onFullscreenChange",n=>{this.props.onFullscreenUpdate&&(n?this.props.onFullscreenUpdate({nativeEvent:{fullscreenUpdate:q.PLAYER_DID_PRESENT}}):this.props.onFullscreenUpdate({nativeEvent:{fullscreenUpdate:q.PLAYER_DID_DISMISS}}))});c(this,"onStatusUpdate",async()=>{if(!this.props.onStatusUpdate)return;const n=await y.getStatusForVideo(this._video);this.props.onStatusUpdate({nativeEvent:n})});c(this,"onLoadStart",()=>{this.props.onLoadStart&&(this.props.onLoadStart(),this.onStatusUpdate())});c(this,"onLoadedData",n=>{this.props.onLoad&&(this.props.onLoad(n),this.onStatusUpdate())});c(this,"onError",n=>{this.props.onError&&(this.props.onError(n),this.onStatusUpdate())});c(this,"onProgress",()=>{this.onStatusUpdate()});c(this,"onSeeking",()=>{this.onStatusUpdate()});c(this,"onEnded",()=>{this.onStatusUpdate()});c(this,"onLoadedMetadata",()=>{this.onStatusUpdate()});c(this,"onCanPlay",n=>{this.props.onReadyForDisplay&&(this.props.onReadyForDisplay(n),this.onStatusUpdate())});c(this,"onStalled",()=>{this.onStatusUpdate()});c(this,"onRef",n=>{var s;(s=this._removeFullscreenListener)==null||s.call(this),n?(this._video=n,this._removeFullscreenListener=vt(this._video,this.onFullscreenChange),this.onStatusUpdate()):this._removeFullscreenListener=void 0})}componentWillUnmount(){var n;(n=this._removeFullscreenListener)==null||n.call(this)}render(){const{source:n,status:s={},resizeMode:r,useNativeControls:i,style:o}=this.props,l={position:void 0,objectFit:r,overflow:"hidden"};return m.createElement(At,{ref:this.onRef,onLoadStart:this.onLoadStart,onLoadedData:this.onLoadedData,onError:this.onError,onTimeUpdate:this.onProgress,onSeeking:this.onSeeking,onEnded:this.onEnded,onLoadedMetadata:this.onLoadedMetadata,onCanPlay:this.onCanPlay,onStalled:this.onStalled,src:(n==null?void 0:n.uri)||void 0,muted:s.isMuted,loop:s.isLooping,autoPlay:s.shouldPlay,controls:i,style:[o,l],playsInline:!0})}}const $=De.create({base:{overflow:"hidden"},poster:{position:"absolute",left:0,top:0,right:0,bottom:0,resizeMode:"contain"},video:{position:"absolute",left:0,top:0,right:0,bottom:0}}),N=Pe,wt=Pe;class Re extends m.Component{constructor(n){super(n);c(this,"_nativeRef",m.createRef());c(this,"_onPlaybackStatusUpdate",null);c(this,"_handleNewStatus",n=>{this.state.showPoster&&n.isLoaded&&(n.isPlaying||n.positionMillis!==0)&&this.setState({showPoster:!1}),this.props.onPlaybackStatusUpdate&&this.props.onPlaybackStatusUpdate(n),this._onPlaybackStatusUpdate&&this._onPlaybackStatusUpdate(n)});c(this,"_performOperationAndHandleStatusAsync",async n=>{if(!this._nativeRef.current)throw new Error("Cannot complete operation because the Video component has not yet loaded");const r=Ne(this._nativeRef.current),i=await n(r);return this._handleNewStatus(i),i});c(this,"_setFullscreen",async n=>this._performOperationAndHandleStatusAsync(s=>wt.setFullscreen(s,n)));c(this,"presentFullscreenPlayer",async()=>this._setFullscreen(!0));c(this,"dismissFullscreenPlayer",async()=>this._setFullscreen(!1));c(this,"getStatusAsync",async()=>this._performOperationAndHandleStatusAsync(n=>y.getStatusForVideo(n)));c(this,"loadAsync",async(n,s={},r=!0)=>{const{nativeSource:i,fullInitialStatus:o}=await ut(n,s,r);return this._performOperationAndHandleStatusAsync(l=>y.loadForVideo(l,i,o))});c(this,"unloadAsync",async()=>this._performOperationAndHandleStatusAsync(n=>y.unloadForVideo(n)));c(this,"setStatusAsync",async n=>(Se(n),this._performOperationAndHandleStatusAsync(s=>y.setStatusForVideo(s,n))));c(this,"replayAsync",async(n={})=>{if(n.positionMillis&&n.positionMillis!==0)throw new Error("Requested position after replay has to be 0.");return this._performOperationAndHandleStatusAsync(s=>y.replayVideo(s,{...n,positionMillis:0,shouldPlay:!0}))});c(this,"playAsync");c(this,"playFromPositionAsync");c(this,"pauseAsync");c(this,"stopAsync");c(this,"setPositionAsync");c(this,"setRateAsync");c(this,"setVolumeAsync");c(this,"setIsMutedAsync");c(this,"setIsLoopingAsync");c(this,"setProgressUpdateIntervalAsync");c(this,"_nativeOnPlaybackStatusUpdate",n=>{this._handleNewStatus(n.nativeEvent)});c(this,"_nativeOnLoadStart",()=>{this.props.onLoadStart&&this.props.onLoadStart()});c(this,"_nativeOnLoad",n=>{this.props.onLoad&&this.props.onLoad(n.nativeEvent),this._handleNewStatus(n.nativeEvent)});c(this,"_nativeOnError",n=>{const s=n.nativeEvent.error;this.props.onError&&this.props.onError(s),this._handleNewStatus(ft(s))});c(this,"_nativeOnReadyForDisplay",n=>{this.props.onReadyForDisplay&&this.props.onReadyForDisplay(n.nativeEvent)});c(this,"_nativeOnFullscreenUpdate",n=>{this.props.onFullscreenUpdate&&this.props.onFullscreenUpdate(n.nativeEvent)});c(this,"_renderPoster",()=>{const n=this.props.PosterComponent??Ce;return this.props.usePoster&&this.state.showPoster?m.createElement(n,{style:[$.poster,this.props.posterStyle],source:this.props.posterSource}):null});this.state={showPoster:!!n.usePoster}}setNativeProps(n){const s=this._nativeRef.current;if(!s)throw new Error("native video reference is not defined.");s.setNativeProps(n)}componentWillUnmount(){this.unloadAsync().catch(()=>{})}setOnPlaybackStatusUpdate(n){this._onPlaybackStatusUpdate=n,this.getStatusAsync()}render(){const n=we(this.props.source)||void 0;let s=N.ScaleNone;if(this.props.resizeMode){const o=this.props.resizeMode;o===D.STRETCH?s=N.ScaleToFill:o===D.CONTAIN?s=N.ScaleAspectFit:o===D.COVER&&(s=N.ScaleAspectFill)}const r={...this.props.status};["progressUpdateIntervalMillis","positionMillis","shouldPlay","rate","shouldCorrectPitch","volume","isMuted","isLooping"].forEach(o=>{o in this.props&&(r[o]=this.props[o])});const i={...mt(this.props,["source","onPlaybackStatusUpdate","usePoster","posterSource","posterStyle",...Object.keys(r)]),style:[$.base,this.props.style],videoStyle:[$.video,this.props.videoStyle],source:n,resizeMode:s,status:r,onStatusUpdate:this._nativeOnPlaybackStatusUpdate,onLoadStart:this._nativeOnLoadStart,onLoad:this._nativeOnLoad,onError:this._nativeOnError,onReadyForDisplay:this._nativeOnReadyForDisplay,onFullscreenUpdate:this._nativeOnFullscreenUpdate};return m.createElement(Te,{style:i.style,pointerEvents:"box-none"},m.createElement(Et,{ref:this._nativeRef,...i,style:i.videoStyle}),this._renderPoster())}}function mt(e,t){const n={...e};for(const s of t)delete n[s];return n}Object.assign(Re.prototype,dt);const Ut=Re;export{D as R,Ut as V};
